---
const pathname = Astro.url.pathname;

const nav = [
  { href: "/", label: "Home" },
  { href: "/apartments", label: "Apartments" },
  { href: "/location", label: "Location" },
  { href: "/contact", label: "Contact" },
];

const isActive = (href: string) =>
  href === "/"
    ? pathname === "/"
    : pathname.startsWith(href);
---

<header class="sticky top-0 z-50 bg-[var(--color-surface)]/90 backdrop-blur border-b border-[var(--color-border)]">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
    <!-- Brand -->
    <a href="/" class="flex items-center gap-2 font-semibold text-lg tracking-tight">
      <!-- Simple logo mark -->
      <svg viewBox="0 0 24 24" class="w-6 h-6" aria-hidden="true">
        <path d="M3 12c5-6 13-6 18 0M5 15c4-4 10-4 14 0" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <circle cx="12" cy="17" r="1.5" fill="currentColor"/>
      </svg>
      Calamon
    </a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-1" aria-label="Primary">
      {nav.map((item) => (
        <a
          href={item.href}
          class={`px-3 py-2 rounded-lg text-sm font-medium transition
            ${isActive(item.href)
              ? "bg-[var(--color-brand)] text-white"
              : "text-[var(--color-text)] hover:bg-black/5"}`}
        >
          {item.label}
        </a>
      ))}
    </nav>

    <!-- Mobile menu (no JS, uses <details>) -->
    <details class="md:hidden">
      <summary
        class="list-none p-2 -mr-2 rounded-lg hover:bg-black/5 cursor-pointer"
        aria-label="Open menu"
      >
        <svg viewBox="0 0 24 24" class="w-6 h-6" aria-hidden="true">
          <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </summary>
      <div class="mt-2 absolute left-0 right-0 bg-[var(--color-surface)] border-t border-[var(--color-border)] shadow-[var(--shadow-soft)]">
        <nav class="px-4 py-3 flex flex-col gap-1" aria-label="Mobile">
          {nav.map((item) => (
            <a
              href={item.href}
              class={`px-3 py-2 rounded-lg text-sm font-medium transition
                ${isActive(item.href)
                  ? "bg-[var(--color-brand)] text-white"
                  : "text-[var(--color-text)] hover:bg-black/5"}`}
            >
              {item.label}
            </a>
          ))}
        </nav>
      </div>
    </details>
  </div>
</header>
