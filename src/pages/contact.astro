---
import { Image as UnpicImage } from "@unpic/astro"; 
import hero6 from "../assets/home/hero6.jpg";

import Layout from "../layouts/Layout.astro";
import {
  Mail,
  Phone,
  Calendar,
  Users,
  Send,
  CheckCircle2,
  AlertTriangle,
  MapPin,
  Home,
  ExternalLink,
  PawPrint,
} from "@lucide/astro";

// success / error query handling
const q = new URL(Astro.request.url).searchParams;
const success = q.get("success") === "1";
const error = q.get("error") === "1";

// (optional) centralize platform URLs; or move to env
const bookingUrl = "https://www.booking.com/hotel/gr/calamon-apartments.en-gb.html?aid=356980&label=gog235jc-10CAsoXEISY2FsYW1vbi1hcGFydG1lbnRzSDNYA2hciAEBmAEzuAEXyAEM2AED6AEB-AEBiAIBqAIBuALj9azFBsACAdICJGJmOTE4NjZlLTFmNjQtNGQ4Ny04ODc5LWVmOTZlOWYwYjgzMdgCAeACAQ&sid=05839a4e68a790da7a89828d58a29a2b&dest_id=-817017&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=1&hpos=1&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1756052204&srpvid=88ec7273bfaf069f&type=total&ucfs=1&"
const airbnbUrl  = "https://www.airbnb.com/rooms/12843947?search_mode=regular_search&adults=1&check_in=2025-09-01&check_out=2025-09-06&children=0&infants=0&pets=0&source_impression_id=p3_1756052366_P3afZVbecfpE_yF5&previous_page_section_name=1000&federated_search_id=2faf620a-733d-4a85-b909-b4aa9a2b030e";
---

<Layout title="Contact Calamon" description="Get in touch to plan your peaceful stay between Rethymno & Chania.">
  <main>
    <!-- Hero header -->
    <!-- <section class="relative h-[40svh] overflow-hidden">
  <UnpicImage
        src={hero6.src}
        alt="Pool and olive trees at Calamon Apartments, Crete"
        layout="fullWidth"
        priority
        placeholder="blurhash"
        class="absolute inset-0 h-full w-full object-cover"
      />
  <div class="absolute inset-0 bg-black/40"></div>

  <div class="relative z-10 h-full flex items-center justify-center text-center px-6">
    <div class="max-w-2xl">
      <h1 class="text-white text-4xl sm:text-5xl font-serif">Get in touch</h1>
      <p class="mt-3 text-white/90">We’ll reply within 24 hours.</p>
    </div>
  </div>
</section> -->

<section class="relative h-[40svh] overflow-hidden" >
        <UnpicImage
        src={hero6.src}
        alt="Pool and olive trees at Calamon Apartments, Crete"
        layout="fullWidth"
        priority
        placeholder="blurhash"
        class="absolute inset-0 h-full w-full object-cover"
      />
        <div
          class="pointer-events-none absolute inset-0 z-10"
          style="background: linear-gradient(to bottom, rgba(255,255,255,0) 70%, var(--color-bg) 100%);"
        ></div>

         <div class="absolute inset-0 bg-black/40"></div>

  <div class="relative z-10 h-full flex items-center justify-center text-center px-6">
    <div class="max-w-2xl">
      <h1 class="text-white text-4xl sm:text-5xl font-serif">Get in touch</h1>
      <p class="mt-3 text-white/90">We’ll reply within 24 hours.</p>
    </div>
  </div>
      </section>

    <!-- Contact + quick links -->
    <section class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-16">
      <!-- Banners -->
      {success && (
        <div class="mb-6 flex items-start gap-3 rounded-lg border border-emerald-300 bg-emerald-50 px-4 py-3 text-emerald-900" aria-live="polite" role="status">
          <CheckCircle2 class="mt-0.5 h-5 w-5" />
          <div>
            <strong>Thank you — your message has been sent.</strong>
            <div>We’ll get back to you shortly.</div>
          </div>
        </div>
      )}
      {error && (
        <div class="mb-6 flex items-start gap-3 rounded-lg border border-red-300 bg-red-50 px-4 py-3 text-red-900" aria-live="assertive" role="alert">
          <AlertTriangle class="mt-0.5 h-5 w-5" />
          <div>
            <strong>Something went wrong.</strong>
            <div>Please try again or email us at <a href="mailto:info@calamon.com" class="underline">info@calamon.com</a>.</div>
          </div>
        </div>
      )}

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Form -->
        <div class="lg:col-span-2">
          <form
            name="contact"
            method="POST"
            data-netlify="true"
            netlify-honeypot="website"
            action="/contact?success=1"
            class="rounded-[var(--radius)] bg-[var(--color-surface)] p-6 sm:p-8 shadow-[var(--shadow-soft)]"
          >
            <!-- Netlify required hidden input -->
            <input type="hidden" name="form-name" value="contact" />
            <!-- Honeypot -->
            <input type="text" name="website" class="hidden" tabindex="-1" autocomplete="off" aria-hidden="true" />

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              <div>
                <label for="name" class="block text-sm font-medium">Full name</label>
                <div class="mt-2 relative">
                  <input
                    id="name" name="name" type="text" required autocomplete="name"
                    class="peer w-full rounded-lg border border-[var(--color-border)] bg-white px-3 py-2 outline-none focus:ring-2 focus:ring-[var(--color-brand)]"
                    placeholder="First and last name"
                  />
                  <Users class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-muted)] peer-focus:text-[var(--color-brand)]" />
                </div>
              </div>

              <div>
                <label for="email" class="block text-sm font-medium">Email</label>
                <div class="mt-2 relative">
                  <input
                    id="email" name="email" type="email" required autocomplete="email"
                    class="peer w-full rounded-lg border border-[var(--color-border)] bg-white px-3 py-2 outline-none focus:ring-2 focus:ring-[var(--color-brand)]"
                    placeholder="you@example.com"
                  />
                  <Mail class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-muted)] peer-focus:text-[var(--color-brand)]" />
                </div>
              </div>

              <div>
                <label for="phone" class="block text-sm font-medium">Phone (optional)</label>
                <div class="mt-2 relative">
                  <input
                    id="phone" name="phone" type="tel" autocomplete="tel" inputmode="tel" pattern="^[0-9+\s()-]{6,}$"
                    class="peer w-full rounded-lg border border-[var(--color-border)] bg-white px-3 py-2 outline-none focus:ring-2 focus:ring-[var(--color-brand)]"
                    placeholder="+30 xxx xxx xxxx"
                  />
                  <Phone class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-muted)] peer-focus:text-[var(--color-brand)]" />
                </div>
              </div>

              <div>
                <label for="dates" class="block text-sm font-medium">Preferred dates (optional)</label>
                <div class="mt-2 relative">
                  <input
                    id="dates" name="dates" type="text" autocomplete="off"
                    class="peer w-full rounded-lg border border-[var(--color-border)] bg-white px-3 py-2 outline-none focus:ring-2 focus:ring-[var(--color-brand)]"
                    placeholder="e.g., 15–20 Sept"
                  />
                  <Calendar class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[var(--color-muted)] peer-focus:text-[var(--color-brand)]" />
                </div>
              </div>
            </div>

            <div class="mt-5">
              <label for="message" class="block text-sm font-medium">Message</label>
              <textarea
                id="message" name="message" rows={6} required
                class="mt-2 w-full rounded-lg border border-[var(--color-border)] bg-white px-3 py-2 outline-none focus:ring-2 focus:ring-[var(--color-brand)]"
                placeholder="Tell us a bit about your trip, number of guests, pets, special requests…"
              ></textarea>
              <p class="mt-2 text-xs text-[var(--color-muted)] inline-flex items-center gap-1">
                <PawPrint class="h-4 w-4" /> Bringing a pet? Let us know here.
              </p>
            </div>

            <div class="mt-5 flex items-start gap-3">
              <input id="consent" name="consent" type="checkbox" required class="mt-1 h-4 w-4 rounded border-[var(--color-border)]" />
              <label for="consent" class="text-sm text-[var(--color-muted)]">
                I consent to having this website store my submitted information so we can respond.
              </label>
            </div>

            <div class="mt-8">
              <button
                type="submit"
                class="inline-flex items-center gap-2 rounded-full border border-[var(--color-brand)] text-[var(--color-brand)]
                       px-8 py-3 text-lg tracking-wide hover:bg-[var(--color-brand)] hover:text-white transition"
              >
                <Send class="h-5 w-5" /> Send message
              </button>
            </div>
          </form>
        </div>

        <!-- Quick info / platforms -->
        <aside class="lg:col-span-1 space-y-4">
          <div class="rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
            <h2 class="text-lg font-semibold">Booking & reviews</h2>
            <p class="mt-1 text-[var(--color-muted)]">Live prices, availability, and policies:</p>
            <div class="mt-4 space-y-2">
              <a href={bookingUrl} target="_blank" rel="noopener"
                 class="flex items-center justify-between rounded-xl border border-[var(--color-border)] px-3 py-2 hover:bg-[var(--color-bg)] transition">
                <span class="inline-flex items-center gap-2"><ExternalLink class="h-4 w-4" /> Booking.com</span>
                <span aria-hidden="true">→</span>
              </a>
              <a href={airbnbUrl} target="_blank" rel="noopener"
                 class="flex items-center justify-between rounded-xl border border-[var(--color-border)] px-3 py-2 hover:bg-[var(--color-bg)] transition">
                <span class="inline-flex items-center gap-2"><Home class="h-4 w-4" /> Airbnb</span>
                <span aria-hidden="true">→</span>
              </a>
            </div>
          </div>

          <!-- Optional: phone/email quick cards -->
          <div class="rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
            <h2 class="text-lg font-semibold">Other ways to reach us</h2>
            <ul class="mt-3 space-y-2 text-[var(--color-muted)]">
              <li class="flex items-center gap-2"><Mail class="h-4 w-4" /><a class="underline" href="mailto:info@calamon.com">info@calamon.com</a></li>
              <li class="flex items-center gap-2"><Phone class="h-4 w-4" /><a class="underline" href="tel:+30XXXXXXXXXX">+30 XXX XXX XXXX</a></li>
            </ul>
          </div>
        </aside>
      </div>
    </section>
  </main>
</Layout>
