---
import { Image } from "astro:assets";
import { Image as UnpicImage } from "@unpic/astro"; // Unpic just for the hero

// Images
import hero9 from "../assets/home/hero9.jpg";
import hero4 from "../assets/home/hero4.jpg";
import olivesView from "../assets/home/olives-view.jpg";
import stairs from "../assets/home/stairs.jpg";
import logo4White from "../assets/logo/logo-4-white.png";

import Layout from "../layouts/Layout.astro";
import {
  PawPrint,
  MapPin,
  Waves,
  Trees,
  LifeBuoy,
  Calendar,
  Home,
  ExternalLink,
  KeySquare,
  Car
} from "@lucide/astro";

//cms
import home from "../content/cms/home.json";

//config
import { SITE, LINKS } from "../config/site";

// External listings
const bookingUrl = LINKS.booking;
const airbnbUrl = LINKS.airbnb;

const schema = {
  "@context": "https://schema.org",
  "@type": "LodgingBusiness",
  name: "Calamon Apartments",
  url: "https://calamon.com",
  sameAs: [bookingUrl, airbnbUrl],
};

const shell = "bg-gradient-to-b from-white/20 to-white/0 text-[color:var(--color-white)]"
---

<Layout
  title="Calamon Apartments — Peaceful stays in Crete"
  description="Simple, quiet apartments between Rethymno & Chania — big pool, pet-friendly, and surrounded by nature."
>
  <Fragment slot="head">
    <script type="application/ld+json">{JSON.stringify(schema)}</script>
  </Fragment>

  <main>
    <!-- HERO -->
      <section class="relative min-h-[70svh] md:h-[80svh] overflow-visible md:overflow-hidden ${shell}">
        <UnpicImage
          src={hero9.src}
          alt="Pool and olive trees at Calamon Apartments, Crete"
          layout="fullWidth"
          placeholder="blurhash"
          fetchpriority="high"
          class="absolute inset-0 h-full w-full object-cover"
        />
        <div class="absolute inset-0 bg-black/30"></div>

<div class="relative z-10 flex items-center justify-center px-4
            pt-[calc(env(safe-area-inset-top)+6rem)] sm:pt-[calc(env(safe-area-inset-top)+7rem)]
            pb-10">
  <div class="max-w-3xl w-full text-center text-white">
    <Image
      src={logo4White}
      alt="Calamon logo"
      width={150}
      loading="eager"
      decoding="async"
      class="mx-auto w-[120px] sm:w-[160px] h-auto"
    />

    <!-- keep your CTA card below here unchanged -->
    <div class="mt-4 rounded-3xl bg-white/10 backdrop-blur-md border border-white/20 p-4 sm:p-6 md:p-8">
      <h1 class="text-3xl sm:text-5xl font-serif tracking-tight">{home.heroTitle}</h1>
      <p class="mt-2 text-sm sm:text-lg text-white/90">{home.heroSubtitle}</p>

      <div class="mt-5 flex flex-col sm:flex-row flex-wrap justify-center gap-3">
        <a href={bookingUrl} target="_blank" rel="noopener"
           class="w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-full bg-white text-black px-6 py-3 text-base font-medium hover:opacity-90 transition">
          <Calendar class="h-5 w-5" />
          Booking.com
        </a>
        <a href={airbnbUrl} target="_blank" rel="noopener"
           class="w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-full border border-white/70 text-white px-6 py-3 text-base hover:bg-white/10 transition">
          <Home class="h-5 w-5" />
          Airbnb
        </a>
      </div>

      <p class="mt-3 text-xs text-white/80">
        Live prices, reviews & policies on Booking.com / Airbnb.
      </p>
    </div>
  </div>
</div>
    </section>

    <!-- MINI GALLERY -->
    <section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8 mt-6">
      <div class="grid grid-cols-2 gap-3 sm:gap-4 md:gap-6">
        <figure class="relative aspect-[4/3] overflow-hidden rounded-2xl">
          <Image
  src={hero4}
  alt="Pool terrace with seating"
  widths={[360, 600, 840, 1080]}         
  sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw"
  quality={75}                             
  loading="lazy"
  decoding="async"
  class="h-full w-full object-cover"
/>
          <figcaption class="sr-only">Pool terrace with seating</figcaption>
        </figure>

        <figure class="relative aspect-[4/3] overflow-hidden rounded-2xl">
          <Image
            src={olivesView}
            alt="Olive-tree path near the apartments"
            widths={[360, 600, 840, 1080]}         
  sizes="(min-width:1024px) 33vw, (min-width:640px) 50vw, 100vw"
  quality={75}                             
  loading="lazy"
  decoding="async"
  class="h-full w-full object-cover"
          />
          <figcaption class="sr-only">Olive-tree path</figcaption>
        </figure>
      </div>
    </section>

    <!-- WHAT GUESTS LOVE -->
    <section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16">
      <h2 class="text-center text-3xl font-serif">What guests love about Calamon</h2>
      <div class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="group rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 hover:shadow-md transition">
          <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-bg)]"><Trees class="h-6 w-6" /></div>
          <h3 class="mt-4 text-lg font-semibold text-center">Peace & nature</h3>
          <p class="mt-1 text-center text-[var(--color-muted)]">Olive trees, open skies, and a calm, uncrowded setting.</p>
        </div>

        <div class="group rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 hover:shadow-md transition">
          <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-bg)]"><Waves class="h-6 w-6" /></div>
          <h3 class="mt-4 text-lg font-semibold text-center">A pool made for pausing</h3>
          <p class="mt-1 text-center text-[var(--color-muted)]">Cool morning dips, golden-hour swims, stars after dark.</p>
        </div>

        <div class="group rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 hover:shadow-md transition">
          <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-bg)]"><PawPrint class="h-6 w-6" /></div>
          <h3 class="mt-4 text-lg font-semibold text-center">Pets welcome</h3>
          <p class="mt-1 text-center text-[var(--color-muted)]">Bring your best friend—simple, sensible house rules.</p>
        </div>

        <div class="group rounded-2xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 hover:shadow-md transition">
          <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-[var(--color-bg)]"><Car class="h-6 w-6" /></div>
          <h3 class="mt-4 text-lg font-semibold text-center">Free parking</h3>
          <p class="mt-1 text-center text-[var(--color-muted)]">Plenty of shady spots on-site.</p>
        </div>

      </div>
    </section>

    <!-- STORY / ETHOS -->
    <section class="grid md:grid-cols-2 items-stretch">
      <div class="relative">
        <Image
          src={stairs}
          alt="Welcoming stairs"
          widths={[640, 960, 1440, 1920]}
          sizes="(min-width:768px) 50vw, 100vw"
          loading="lazy"
          decoding="async"
          class="block h-full w-full object-cover"
        />
        <!-- fade into content panel only on larger screens -->
        <div
          class="pointer-events-none absolute inset-0 z-10 hidden md:block"
          style="background: linear-gradient(to right, rgba(255,255,255,0) 65%, var(--color-bg) 100%);"
        ></div>
      </div>

      <div class="flex items-center bg-[var(--color-bg)] p-10 sm:p-16">
        <div class="max-w-md">
          <h2 class="text-3xl sm:text-4xl font-serif">Simple on purpose</h2>
          <p class="mt-4 text-[var(--color-muted)] leading-relaxed">
            Calamon isn’t a luxury resort. It’s a quiet base to slow down: read by the pool, nap in the shade, wander the olive paths, and drift off to the sound of cicadas. Come as you are—solo, with friends, or with the dog.
          </p>
        </div>
      </div>
    </section>

    <!-- LOCATION & NEARBY (one cohesive section) -->
<section class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16">
  <div class="grid md:grid-cols-5 gap-10 items-start">
    <!-- Copy + quick chips -->
    <div class="md:col-span-2 text-center md:text-left">
      <h2 class="text-3xl font-serif">In the sweet spot between Rethymno & Chania</h2>
      <p class="mt-3 text-[var(--color-muted)]">
        Wake up among olive trees—and be a short, easy drive from lakes, beaches, and proper Cretan food.
        Base yourself somewhere beautiful, with everything you want close by.
      </p>

      <a
        href="/contact"
        class="mt-12 inline-flex items-center gap-2 rounded-full border border-[var(--color-brand)] text-[var(--color-brand)]
               px-6 py-3 text-md hover:bg-[var(--color-brand)] hover:text-white transition"
      >
        Ask for local tips
      </a>
    </div>

    <!-- Highlight cards -->
    <div class="md:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div class="rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
        <div class="flex items-center gap-3">
          <Waves class="h-5 w-5" />
          <h3 class="font-semibold">Kourna Lake</h3>
        </div>
        <p class="mt-2 text-[var(--color-muted)]">
          Freshwater, mountain backdrop, paddle boats—cool and calm even on warm days.
        </p>
      </div>

      <div class="rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
        <div class="flex items-center gap-3">
          <MapPin class="h-5 w-5" />
          <h3 class="font-semibold">Georgioupolis & Vrysses</h3>
        </div>
        <p class="mt-2 text-[var(--color-muted)]">
          Seaside strolls, a little chapel on the water, and village tavernas that do it right.
        </p>
      </div>

      <div class="rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
        <div class="flex items-center gap-3">
          <LifeBuoy class="h-5 w-5" />
          <h3 class="font-semibold">Petre Beach</h3>
        </div>
        <p class="mt-2 text-[var(--color-muted)]">
          Wide sandy stretch for swims and sunsets—scuba lessons available if you fancy.
        </p>
      </div>

      <div class="rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
        <div class="flex items-center gap-3">
          <MapPin class="h-5 w-5" />
          <h3 class="font-semibold">Easy day trips</h3>
        </div>
        <p class="mt-2 text-[var(--color-muted)]">
          East or west without packing up—your base is central, quiet, and well-connected.
        </p>
      </div>
    </div>
  </div>
</section>

    <!-- FAQ (friendly tone) -->
    <section class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 pb-6">
      <h2 class="text-center text-2xl sm:text-3xl font-serif">Good to know</h2>
      <div class="mt-6 space-y-3">
        <details class="group rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
          <summary class="cursor-pointer list-none font-medium flex items-center justify-between">
            <span class="inline-flex items-center gap-2"><PawPrint class="h-5 w-5" /> Pet policy</span>
            <span aria-hidden="true" class="transition group-open:rotate-180">⌄</span>
          </summary>
          <p class="mt-3 text-[var(--color-muted)]">
            We’re pet-friendly. Please mention your pet when booking so we can make it comfy for everyone.
          </p>
        </details>

        <details class="group rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-5">
          <summary class="cursor-pointer list-none font-medium flex items-center justify-between">
            <span class="inline-flex items-center gap-2"><KeySquare class="h-5 w-5" /> Check-in / check-out</span>
            <span aria-hidden="true" class="transition group-open:rotate-180">⌄</span>
          </summary>
          <p class="mt-3 text-[var(--color-muted)]">
            Easy self check-in. Exact times and instructions are listed on Booking.com / Airbnb with your reservation.
          </p>
        </details>
      </div>
    </section>

    <!-- FINAL CTA -->
    <section class="text-center py-20 bg-[var(--color-surface)]">
      <h2 class="text-3xl sm:text-4xl font-serif">{home.finalCtaTitle}</h2>
      <p class="mt-2 text-[var(--color-muted)]">{home.finalCtaSubtitle}</p>

      <div class="mt-6 flex items-center justify-center gap-3">
        <a href={bookingUrl} target="_blank" rel="noopener"
           class="inline-flex items-center gap-2 rounded-full border border-[var(--color-brand)] text-[var(--color-brand)] px-8 py-3 text-lg tracking-wide hover:bg-[var(--color-brand)] hover:text-white transition">
          <ExternalLink class="h-5 w-5" />
          Booking.com
        </a>
        <a href={airbnbUrl} target="_blank" rel="noopener"
           class="inline-flex items-center gap-2 rounded-full border border-[var(--color-border)] text-[var(--color-text)] px-8 py-3 text-lg tracking-wide hover:bg-[var(--color-text)] hover:text-white transition">
          <Home class="h-5 w-5" />
          Airbnb
        </a>
      </div>
    </section>
  </main>
</Layout>
